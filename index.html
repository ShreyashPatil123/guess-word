<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Enhanced viewport for mobile -->
    <meta 
      name="viewport" 
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    
    <!-- iOS specific -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="GuessAI" />
    
    <!-- Android specific -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#6aaa64" />
    
    <!-- Google AdSense -->
    <meta name="google-adsense-account" content="ca-pub-4898199844231067">
    
    <!-- Prevent auto-zoom on input focus (iOS) -->
    <meta name="format-detection" content="telephone=no" />
    
    <title>Guess the Word | AI-Powered Game</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/animations.css" />
    <link rel="stylesheet" href="css/mobile.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" href="css/leaderboard.css" />
    <link rel="stylesheet" href="css/settings.css" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@600;700;800&family=JetBrains+Mono:wght@500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Trailer Overlay -->
    <!-- Intro Video Screen (plays once) -->
    <div id="intro-video-screen" class="intro-screen hidden">
      <video id="intro-video" muted playsinline>
        <source src="assets/trailer.mp4" type="video/mp4" />
      </video>
      <button id="skip-intro-btn" class="btn glass hidden">
        Skip Intro <span class="arrow-icon">‚Üí</span>
      </button>
    </div>

    <!-- Demo Setup Modal (Moved to Global Scope) -->
    <div id="demo-modal-container" class="modal-backdrop hidden" style="z-index: 2000;">
        <div id="demo-modal" class="modal">
            <div class="modal-content small-modal">
                <div class="modal-header">
                    <h2>Start Demo</h2>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Enter a display name to start playing immediately.</p>
                    <div class="auth-input-group">
                        <label>Display Name</label>
                        <input type="text" id="demo-name" placeholder="e.g. GuestPlayer" maxlength="15">
                    </div>
                    <button id="start-demo-btn" class="btn primary glow">Start Playing</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Overlay -->
    <div id="auth-overlay" class="auth-overlay hidden">
      <!-- Left Side Ad -->
      <div class="side-ad side-ad-left">
        <div class="ad-placeholder">
          <span>Advertisement</span>
        </div>
      </div>
      
      <div class="auth-modal">
        <div class="auth-header">
          <h2>Welcome to <span class="highlight">GuessAI</span></h2>
          <p>Sign in to play the game</p>
        </div>

        <!-- Mode Toggle Tabs -->
        <div class="auth-tabs">
          <button id="auth-login-tab" class="auth-tab active">Login</button>
          <button id="auth-signup-tab" class="auth-tab">Sign Up</button>
        </div>
        
        <!-- Demo Button -->
        <div class="auth-demo-container">
            <button id="auth-demo-btn" class="btn secondary small">Continue as Demo</button>
        </div>

        <!-- LOGIN FORM (Email + Password only) -->
        <div id="auth-login-form" class="auth-form">
          <div class="auth-input-group">
            <label for="login-identifier">Email or Username</label>
            <input
              type="text"
              id="login-identifier"
              placeholder="Enter email or username"
            />
          </div>
          <div class="auth-input-group">
            <label for="login-password">Password</label>
            <input
              type="password"
              id="login-password"
              placeholder="Enter your password"
              autocomplete="current-password"
            />
          </div>
          <button id="login-btn" class="btn primary auth-btn">Login</button>
        </div>

        <!-- SIGNUP FORM - Step 1 (Email + Password + Confirm) -->
        <div id="auth-signup-form" class="auth-form hidden">
          <div class="auth-input-group">
            <label for="signup-username">Username</label>
            <input
              type="text"
              id="signup-username"
              placeholder="Choose a unique username"
              maxlength="20"
            />
          </div>
          <div class="auth-input-group">
            <label for="signup-email">Email</label>
            <input
              type="email"
              id="signup-email"
              placeholder="you@example.com"
              autocomplete="email"
            />
          </div>
          <div class="auth-input-group">
            <label for="signup-password">Password</label>
            <input
              type="password"
              id="signup-password"
              placeholder="At least 6 characters"
              autocomplete="new-password"
              minlength="6"
            />
          </div>
          <div class="auth-input-group">
            <label for="signup-confirm">Confirm Password</label>
            <input
              type="password"
              id="signup-confirm"
              placeholder="Re-enter password"
              autocomplete="new-password"
            />
            <p id="password-mismatch" class="input-error hidden">
              Passwords do not match
            </p>
          </div>
          <button id="signup-btn" class="btn primary auth-btn" disabled>
            Create Account
          </button>
        </div>

        <!-- SIGNUP FORM - Step 2 (OTP Verification) -->
        <div id="auth-otp-form" class="auth-form hidden">
          <p class="auth-info">We sent a verification code to your email</p>
          <div class="auth-input-group">
            <label for="signup-otp">Verification Code</label>
            <input
              type="text"
              id="signup-otp"
              placeholder="Enter 6-digit code"
              maxlength="6"
              autocomplete="one-time-code"
            />
          </div>
          <button id="verify-btn" class="btn primary auth-btn">
            Verify & Create Account
          </button>
          <button id="otp-back-btn" class="btn text">
            ‚Üê Use different email
          </button>
        </div>

        <!-- Error Message -->
        <p id="auth-error" class="auth-error hidden"></p>
      </div>
      
      <!-- Right Side Ad -->
      <div class="side-ad side-ad-right">
        <div class="ad-placeholder">
          <span>Advertisement</span>
        </div>
      </div>
    </div>

    <!-- Main Game Container Wrapper with Side Ads -->
    <div id="game-wrapper" class="game-wrapper hidden">
      <!-- Left Side Ad -->
      <div class="side-ad side-ad-left">
        <div class="ad-placeholder">
          <span>Advertisement</span>
        </div>
      </div>
      
      <div id="game-container" class="container">
      <!-- Header -->
      <header>
        <div class="header-left">
          <button id="menu-btn" class="icon-btn" aria-label="Menu">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M3 12h18M3 6h18M3 18h18" />
            </svg>
          </button>
          <button
            id="leaderboard-btn"
            class="icon-btn"
            aria-label="Leaderboard"
          >
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M18 20V10M12 20V4M6 20v-6" />
            </svg>
          </button>
        </div>

        <div class="logo">
          <h1>GUESS<span class="highlight">AI</span></h1>
        </div>

        <div class="header-right" style="display: flex; align-items: center; gap: 8px;">
          <!-- V2: Global creator credit -->
          <span class="header-credit" style="font-size: 11px; color: #888; opacity: 0.55; margin-right: 8px; font-weight: normal; white-space: nowrap;">Created by <a href="https://www.linkedin.com/in/shreyash-patil-33654a329/" target="_blank" rel="noopener" style="color: #0077b5; text-decoration: none;">Shreyash Patil</a> &amp; <a href="https://www.linkedin.com/in/parag-yewale-111b85362/" target="_blank" rel="noopener" style="color: #0077b5; text-decoration: none;">Parag Yewale</a></span>
          <span id="user-display" class="user-display hidden"></span>
          <button
            id="logout-btn"
            class="icon-btn hidden"
            aria-label="Logout"
            title="Logout"
          >
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
              <polyline points="16 17 21 12 16 7" />
              <line x1="21" y1="12" x2="9" y2="12" />
            </svg>
          </button>
          <button
            id="achievements-btn"
            class="icon-btn"
            aria-label="Achievements"
          >
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="8" r="7" />
              <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88" />
            </svg>
          </button>
          <button id="settings-btn" class="icon-btn" aria-label="Settings">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="3" />
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
              />
            </svg>
          </button>
          <!-- Pause Button (visible during gameplay) -->
          <button
            id="pause-btn"
            class="icon-btn hidden"
            aria-label="Pause Game"
            title="Pause"
          >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <rect x="6" y="4" width="4" height="16" rx="1" />
              <rect x="14" y="4" width="4" height="16" rx="1" />
            </svg>
          </button>
        </div>
      </header>

      <!-- Dashboard / Home Screen -->
      <section id="dashboard" class="screen active">
        <!-- Decorative Background Grid (Non-interactive) -->
        <div class="home-bg-grid" aria-hidden="true">
          <div class="bg-grid">
            <div class="bg-row">
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
            </div>
            <div class="bg-row">
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
            </div>
            <div class="bg-row">
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
            </div>
            <div class="bg-row">
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
            </div>
            <div class="bg-row">
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
              <div class="bg-tile"></div>
            </div>
          </div>
        </div>

        <div class="dashboard-content">
          <h2>Ready to Guess?</h2>
          <p class="subtitle">
            Timed word challenges ¬∑ 3‚Äì5 letter modes ¬∑ AI-generated words
          </p>

          <div class="action-buttons">
            <button id="continue-game-btn" class="btn primary hidden">
              Continue Game
            </button>
            <button id="new-game-btn" class="btn primary">New Game</button>
            <button id="tutorial-btn" class="btn text">How to Play</button>
          </div>

          <div id="stats-preview" class="stats-preview hidden">
            <!-- Dynamic Stats Here -->
          </div>
        </div>
      </section>

      <!-- Leaderboard Screen (Dashboard Layout) -->
      <section id="leaderboard-screen" class="screen hidden dashboard-layout">
        <div class="lb-container">
          <!-- 1. Header & Stats Row -->
          <div class="lb-header-section">
            <div class="lb-title-row">
              <h2>Leaderboard <span class="highlight">Pro</span></h2>
              <button id="lb-back-btn" class="btn text">‚Üê Back to Menu</button>
            </div>

            <div id="lb-stats-grid" class="lb-stats-grid">
              <!-- Stat Card 1 -->
              <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-info">
                  <span class="stat-label">Total Players</span>
                  <span id="stat-total-players" class="stat-value">-</span>
                </div>
              </div>
              <!-- Stat Card 2 -->
              <div class="stat-card">
                <div class="stat-icon">üèÜ</div>
                <div class="stat-info">
                  <span class="stat-label">Competition</span>
                  <span class="stat-value">Season 1</span>
                </div>
              </div>
              <!-- Stat Card 3 -->
              <div class="stat-card">
                <div class="stat-icon">üëæ</div>
                <div class="stat-info">
                  <span class="stat-label">Your Global Rank</span>
                  <span id="stat-user-rank" class="stat-value">-</span>
                </div>
              </div>
              <!-- Stat Card 4 -->
              <div class="stat-card">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-info">
                  <span class="stat-label">Status</span>
                  <span class="stat-value">Active</span>
                </div>
              </div>
            </div>
          </div>

          <!-- 2. Tabs & Podium -->
          <div class="lb-controls-section">
            <div class="lb-tabs">
              <button class="lb-tab active" data-tab="global">Global</button>
              <button class="lb-tab" data-tab="3">3 Letter</button>
              <button class="lb-tab" data-tab="4">4 Letter</button>
              <button class="lb-tab" data-tab="5">5 Letter</button>
            </div>
          </div>

          <div id="lb-podium" class="lb-podium hidden">
            <!-- Injected by JS: Rank 2, Rank 1, Rank 3 -->
          </div>

          <!-- 3. Main Data Table Panel -->
          <div class="lb-panel">
            <div class="lb-table-wrapper">
              <table class="lb-table">
                <thead>
                  <tr>
                    <th class="th-rank">Rank</th>
                    <th class="th-player">Player</th>
                    <th class="th-stat">Avg Score</th>
                    <th class="th-stat">Best Score</th>
                    <th class="th-stat desktop-only">Games</th>
                    <th class="th-stat desktop-only">Wins</th>
                  </tr>
                </thead>
                <tbody id="lb-list">
                  <!-- Injected by JS -->
                </tbody>
              </table>

              <div id="lb-loading" class="lb-loading hidden">
                <div class="spinner"></div>
                <p>Fetching rankings...</p>
              </div>

              <div id="lb-empty" class="lb-empty hidden">
                <p>No rankings found for this mode yet.</p>
              </div>

              <div id="lb-error" class="lb-error hidden">
                <p>Unable to load leaderboard data.</p>
                <button class="btn small" onclick="Leaderboard.retry()">
                  Retry
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Achievements Screen (Full Page) -->
      <section id="achievements-screen" class="screen hidden dashboard-layout">
        <div class="achievements-page">
          <!-- Header -->
          <div class="achievements-page-header">
            <div class="achievements-title-row">
              <h2>üèÜ Achievements</h2>
              <button id="achievements-back-btn" class="btn text">‚Üê Back to Menu</button>
            </div>
            
            <!-- Stats Cards -->
            <div class="achievements-stats-grid">
              <div class="stat-card">
                <div class="stat-icon">üéñÔ∏è</div>
                <div class="stat-info">
                  <span class="stat-label">Unlocked</span>
                  <span id="ach-page-unlocked" class="stat-value">0</span>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-info">
                  <span class="stat-label">Total</span>
                  <span id="ach-page-total" class="stat-value">20</span>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">‚≠ê</div>
                <div class="stat-info">
                  <span class="stat-label">Points</span>
                  <span id="ach-page-points" class="stat-value">0</span>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-info">
                  <span class="stat-label">Progress</span>
                  <span id="ach-page-progress" class="stat-value">0%</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Filter Tabs -->
          <div class="achievements-filter-tabs">
            <button class="ach-filter-tab active" data-filter="all">All</button>
            <button class="ach-filter-tab" data-filter="gameplay">üéÆ Gameplay</button>
            <button class="ach-filter-tab" data-filter="mastery">üèÜ Mastery</button>
            <button class="ach-filter-tab" data-filter="collection">üìö Collection</button>
            <button class="ach-filter-tab" data-filter="special">‚≠ê Special</button>
            <button class="ach-filter-tab" data-filter="strategy">üéØ Strategy</button>
            <button class="ach-filter-tab" data-filter="social">üë• Social</button>
            <button class="ach-filter-tab" data-filter="vocabulary">üìñ Vocabulary</button>
            <button class="ach-filter-tab" data-filter="persistence">üí™ Persistence</button>
            <button class="ach-filter-tab" data-filter="secret">üîÆ Secret</button>
          </div>
          
          <!-- Achievements Grid -->
          <div id="achievements-page-grid" class="achievements-page-grid">
            <!-- Achievement cards will be rendered by JS -->
          </div>
        </div>
      </section>

      <!-- Difficulty Selection -->
      <section id="difficulty-selection" class="screen hidden">
        <h2>Select Difficulty</h2>
        <div class="difficulty-cards">
          <button class="diff-card" data-level="3">
            <div class="diff-header">
              <h3>EASY</h3>
              <span class="badge easy">3 Letters</span>
            </div>
            <div class="diff-info">
              <p>‚è±Ô∏è 3 Minutes</p>
              <p>üéØ 6 Attempts</p>
            </div>
          </button>

          <button class="diff-card" data-level="4">
            <div class="diff-header">
              <h3>MEDIUM</h3>
              <span class="badge medium">4 Letters</span>
            </div>
            <div class="diff-info">
              <p>‚è±Ô∏è 4 Minutes</p>
              <p>üéØ 7 Attempts</p>
            </div>
          </button>

          <button class="diff-card" data-level="5">
            <div class="diff-header">
              <h3>HARD</h3>
              <span class="badge hard">5 Letters</span>
            </div>
            <div class="diff-info">
              <p>‚è±Ô∏è 5 Minutes</p>
              <p>üéØ 8 Attempts</p>
            </div>
          </button>
        </div>
        <button id="back-to-dash-btn" class="btn text">Back</button>
      </section>

      <!-- Game Board Area -->
      <section id="game-board-area" class="screen hidden">
        <div class="game-info-bar">
          <div class="timer-container">
            <span id="timer">00:00</span>
          </div>
          <div class="score-container">
            Score: <span id="current-score">0</span>
          </div>
        </div>

        <div id="grid-container" class="grid-container">
          <!-- Grid generated by JS -->
        </div>

        <div id="keyboard-container" class="keyboard-container">
          <!-- Keyboard generated by JS -->
        </div>
      </section>

      <!-- Modals -->
      <div id="modal-container" class="modal-backdrop hidden">
        <!-- Pause Modal -->
        <div id="pause-modal" class="modal hidden">
          <h2>‚è∏Ô∏è Game Paused</h2>
          <p class="pause-info">Take your time!</p>
          <div class="modal-actions">
            <button id="resume-btn" class="btn primary">Resume</button>
            <button id="pause-home-btn" class="btn secondary">
              Back to Home
            </button>
          </div>
        </div>

        <!-- Result Modal -->
        <div id="result-modal" class="modal hidden">
          <h2 id="result-title">Victory!</h2>
          <div id="result-word" class="highlight-word">WORD</div>
          <div class="result-stats">
            <div class="stat-item">
              <span class="label">Attempts</span
              ><span id="res-attempts" class="val">0/0</span>
            </div>
            <div class="stat-item">
              <span class="label">Time</span
              ><span id="res-time" class="val">00:00</span>
            </div>
            <div class="stat-item">
              <span class="label">Score</span
              ><span id="res-score" class="val">0</span>
            </div>
          </div>
          <div class="modal-actions">
            <button id="play-again-btn" class="btn primary">Play Again</button>
            <button id="home-btn" class="btn secondary">Menu</button>
          </div>
        </div>




    <!-- Additional Modals -->
        <!-- Tutorial Modal ("How to Play") -->
        <div id="tutorial-modal" class="modal hidden">
            <h2>How to Play</h2>
            
            <div class="modal-content-scroll settings-content"> 
                <!-- Reusing settings-content for similar padding/layout if appropriate, or adding custom class -->
                
                <div class="tutorial-section">
                    <h3>What Is This Game?</h3>
                    <p>GuessAI is a word guessing game where you try to find the hidden secret word before time runs out.</p>
                </div>

                <div class="tutorial-section">
                    <h3>How to Start Playing</h3>
                    <ul>
                        <li>Click <strong>New Game</strong> on the dashboard.</li>
                        <li>Choose a word length (3, 4, or 5 letters).</li>
                        <li>The timer starts immediately!</li>
                    </ul>
                </div>

                <div class="tutorial-section">
                    <h3>Game Modes</h3>
                    <ul>
                        <li><strong>3 Letters</strong> (Easy): Short words, 3 minutes.</li>
                        <li><strong>4 Letters</strong> (Medium): Standard challenge, 4 minutes.</li>
                        <li><strong>5 Letters</strong> (Hard): Longer words, 5 minutes. Harder modes earn more points!</li>
                    </ul>
                </div>

                <div class="tutorial-section">
                    <h3>How to Enter a Guess</h3>
                    <ul>
                        <li>Type letters using your keyboard or the on-screen keys.</li>
                        <li>Press <span class="key-badge">ENTER</span> to submit your guess.</li>
                        <li>Use <span class="key-badge">BACKSPACE</span> to delete.</li>
                    </ul>
                </div>

                <div class="tutorial-section">
                    <h3>Color Meanings</h3>
                    <p>Colors guide you to the answer:</p>
                    <div class="color-demo-row">
                        <div class="demo-tile correct">A</div>
                        <span><strong>Green</strong>: Right letter, Right place.</span>
                    </div>
                    <div class="color-demo-row">
                        <div class="demo-tile present">B</div>
                        <span><strong>Yellow</strong>: Right letter, Wrong place.</span>
                    </div>
                    <div class="color-demo-row">
                        <div class="demo-tile absent">C</div>
                        <span><strong>Gray</strong>: Letter is not in the word.</span>
                    </div>
                </div>

                <div class="tutorial-section">
                    <h3>Time Rules</h3>
                    <ul>
                        <li>Timer starts instantly.</li>
                        <li><strong>Yellow Timer</strong>: Time is running low.</li>
                        <li><strong>Red Timer</strong>: Almost out of time!</li>
                        <li>If time hits 0:00, it's <strong>Game Over</strong>.</li>
                    </ul>
                </div>

                <div class="tutorial-section">
                    <h3>Winning & Losing</h3>
                    <ul>
                        <li><strong>Win</strong>: Guess the full word correctly.</li>
                        <li><strong>Lose</strong>: Run out of attempts OR run out of time.</li>
                        <li><em>Tip: Losing still counts as a game played!</em></li>
                    </ul>
                </div>

                <div class="tutorial-section">
                    <h3>Scoring</h3>
                    <ul>
                        <li>Fewer tries = More points.</li>
                        <li>Faster solve = Bonus points.</li>
                        <li>Even if you lose, finding correct letters gives you a small score!</li>
                    </ul>
                </div>

                 <div class="tutorial-section">
                    <h3>Progress & Stats</h3>
                    <ul>
                        <li><strong>Games Played</strong>: Total matches started.</li>
                        <li><strong>Avg Score</strong>: Shows how well you usually play.</li>
                    </ul>
                </div>

                <div class="tutorial-section">
                    <h3>Account Types</h3>
                    <ul>
                        <li><strong>Demo User</strong>: Progress saved ONLY on this device. Clearing cache wipes stats.</li>
                        <li><strong>Registered</strong>: Save progress online and climb the global leaderboard permanently.</li>
                    </ul>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn primary close-modal-btn">Got it!</button>
            </div>
        </div>

        <div id="settings-modal" class="modal hidden">
          <h2>Settings</h2>
          
          <div class="settings-tabs">
            <button class="settings-tab active" data-tab="account">Account</button>
            <button class="settings-tab" data-tab="appearance">Appearance</button>
            <button class="settings-tab" data-tab="audio">Audio</button>
          </div>

          <div class="settings-content">
            <!-- Account Panel -->
            <div id="panel-account" class="settings-panel active">
              <div class="settings-section">
                <span class="section-title">Profile</span>
                <div class="avatar-section">
                   <img id="settings-avatar" src="assets/default-avatar.png" class="avatar-preview" onerror="this.src='https://ui-avatars.com/api/?background=random'">
                      <div class="avatar-actions">
                          <label id="upload-avatar-btn" class="btn primary small">
                              Change Photo
                              <input type="file" id="avatar-input" accept="image/*" hidden>
                          </label>
                          <button id="remove-avatar-btn" class="btn text small danger hidden" style="width: fit-content; align-self: flex-start;">Remove</button>
                          <span class="setting-desc">Max size 1MB</span>
                      </div>
                </div>
              </div>

              <div class="settings-section">
                <label class="setting-row">
                  <div class="setting-label">
                     <span class="setting-name">Username</span>
                     <span class="setting-desc">Visible on leaderboards (<span id="username-char-count">0</span>/20)</span>
                  </div>
                  <input type="text" id="settings-username" class="setting-input" maxlength="20">
                  <button id="save-username-btn" class="btn small primary" disabled>Save</button>
                </label>
              </div>

              <div class="settings-section">
                 <label class="setting-row">
                    <div class="setting-label">
                        <span class="setting-name">Email</span>
                    </div>
                    <input type="text" id="settings-email" class="setting-input plain-text" readonly>
                </label>
              </div>

              <div class="settings-section danger-zone">
                <span class="section-title">Danger Zone</span>
                <div class="setting-row">
                     <div class="setting-label">
                        <span class="setting-name">Sign Out</span>
                    </div>
                    <button id="btn-signout" class="btn secondary small">Sign Out</button>
                </div>
                <div class="setting-row" style="margin-top: 10px; padding-top: 10px; border-top: 1px dashed rgba(220,38,38,0.2)">
                     <div class="setting-label">
                        <span class="setting-name" style="color:red">Delete Account</span>
                        <span class="setting-desc">Permanently remove all data</span>
                    </div>
                    <button id="btn-delete-account" class="btn error small" style="border-color:red; color:red">Delete</button>
                </div>
              </div>
            </div>

            <!-- Appearance Panel -->
            <div id="panel-appearance" class="settings-panel">
               <div class="settings-section">
                  <span class="section-title">Visuals</span>
                  <div class="setting-row">
                      <div class="setting-label">
                          <span class="setting-name">Dark Mode</span>
                          <span class="setting-desc">Easier on the eyes</span>
                      </div>
                      <div class="setting-item toggle">
                          <input type="checkbox" id="theme-toggle">
                      </div>
                  </div>
               </div>

               <div class="settings-section">
                  <span class="section-title">Accessibility &amp; Preference</span>
                  <div class="setting-row">
                      <div class="setting-label">
                          <span class="setting-name">Reduced Motion</span>
                          <span class="setting-desc">Minimize animations</span>
                      </div>
                      <div class="setting-item toggle">
                          <input type="checkbox" id="reduce-motion-toggle">
                      </div>
                  </div>
                  <div class="setting-row">
                      <div class="setting-label">
                          <span class="setting-name">Compact Mode</span>
                          <span class="setting-desc">Denser layout</span>
                      </div>
                      <div class="setting-item toggle">
                          <input type="checkbox" id="compact-mode-toggle">
                      </div>
                  </div>
               </div>
            </div>

            <!-- Audio Panel -->
            <div id="panel-audio" class="settings-panel">
               <div class="settings-section">
                  <span class="section-title">Volume</span>
                  <div class="setting-row" style="flex-wrap: wrap;">
                      <div class="setting-label" style="width: 100%">
                         <span class="setting-name">Master Volume</span>
                      </div>
                      <div class="volume-slider-container">
                          <span>üîà</span>
                          <input type="range" id="master-volume" class="volume-slider" min="0" max="100" value="100">
                          <span>üîä</span>
                      </div>
                  </div>
               </div>

               <div class="settings-section">
                  <span class="section-title">Controls</span>
                  <div class="setting-row">
                      <div class="setting-label">
                          <span class="setting-name">Sound Effects</span>
                          <span class="setting-desc">Game sounds</span>
                      </div>
                      <div class="setting-item toggle">
                          <input type="checkbox" id="sfx-toggle" checked>
                      </div>
                  </div>
                  <div class="setting-row">
                      <div class="setting-label">
                          <span class="setting-name">Mute in Background</span>
                          <span class="setting-desc">Silence when tab is hidden</span>
                      </div>
                      <div class="setting-item toggle">
                          <input type="checkbox" id="bg-mute-toggle" checked>
                      </div>
                  </div>
               </div>
            </div>
          </div>

          <div class="settings-footer">
            <div class="settings-attribution">Created by <a href="https://www.linkedin.com/in/shreyash-patil-33654a329/" target="_blank" rel="noopener" style="color: #0077b5; text-decoration: none;"></a>Shreyash Patil</a> & <a href="https://www.linkedin.com/in/parag-yewale-111b85362/" target="_blank" rel="noopener" style="color: #0077b5; text-decoration: none;">Parag Yewale</a></div>
            <button id="reset-data-btn" class="btn text danger">Reset Data</button>
            <button id="close-settings-btn" class="btn primary">Done</button>
          </div>
        </div>
      </div>
      </div>

      <!-- Achievement Popup -->
      <div id="achievement-popup" class="achievement-toast hidden">
        <div class="ach-icon">üèÜ</div>
        <div class="ach-text">
          <h4 id="ach-title">Title</h4>
          <p id="ach-desc">Description</p>
        </div>
      </div>

      <!-- Achievements Modal -->
      <div id="achievements-modal-backdrop" class="modal-backdrop hidden">
        <div id="achievements-modal" class="modal achievements-modal">
          <div class="modal-header">
            <h2>üèÜ Achievements</h2>
            <button class="close-modal-btn" id="close-achievements-btn">&times;</button>
          </div>
          <div class="achievements-stats">
            <div class="ach-stat">
              <span id="ach-unlocked-count">0</span>
              <span class="ach-stat-label">Unlocked</span>
            </div>
            <div class="ach-stat">
              <span id="ach-total-count">20</span>
              <span class="ach-stat-label">Total</span>
            </div>
            <div class="ach-stat">
              <span id="ach-total-points">0</span>
              <span class="ach-stat-label">Points</span>
            </div>
          </div>
          <div class="achievements-filter">
            <button class="ach-filter-btn active" data-filter="all">All</button>
            <button class="ach-filter-btn" data-filter="gameplay">Gameplay</button>
            <button class="ach-filter-btn" data-filter="mastery">Mastery</button>
            <button class="ach-filter-btn" data-filter="collection">Collection</button>
            <button class="ach-filter-btn" data-filter="special">Special</button>
          </div>
          <div id="achievements-grid" class="achievements-grid">
            <!-- Achievement cards injected by JS -->
            <div class="ach-loading">Loading achievements...</div>
          </div>
        </div>
      </div>
    </div>
      
      <!-- Right Side Ad -->
      <div class="side-ad side-ad-right">
        <div class="ad-placeholder">
          <span>Advertisement</span>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <!-- Supabase SDK (served locally) -->
    <!-- Removed UMD script in favor of ESM in supabase-client.js -->
    <script type="module" src="js/supabase-client.js"></script>

    <script src="js/intro.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/achievements.js"></script>
    <script src="js/gemini-api.js"></script>
    <script src="js/leaderboard.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/scoring.js"></script>
    <script src="js/progress.js"></script>
    <script src="js/game.js"></script>
  </body>
</html>
